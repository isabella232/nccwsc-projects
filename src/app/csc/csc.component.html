<div class="row">
  <div class="col-md-12">
    <h1>{{ title }} Projects</h1>
  </div>


</div><br><br>

<span class="row">
  <div class=" col-xs-12 col-md-2">
    <select (change)="filterProjectsList($event.target.value)" [(ngModel)]="current_topic" class="filter">
      <option *ngFor="let topic of topics" [value]="topic">{{ topic }}</option>
    </select>
  </div>
  <div class="col-xs-12 col-md-2">
    <select (change)="filterProjectsList($event.target.value)"  [(ngModel)]="current_fy" class="filter">
      <option *ngFor="let fiscal_year of fiscal_years" [value]="fiscal_year">{{ fiscal_year }}</option>
    </select>
  </div>
  <div class="col-xs-12 col-md-2">
    <select  (change)="filterProjectsList($event.target.value)" [(ngModel)]="current_status" class="filter">
      <option *ngFor="let status of statuses" [value]="status">{{ status }}</option>
    </select>
  </div>
  <a style = "padding: 12px; margin-left: 10px; float: right" class = "btn btn-primary col-xs-12 col-md-2" href= "">Explore Other Topics</a>
</span>



<div class="row" *ngIf="!dataLoading">
  <div class="col-md-12">
    <table class = "table table-striped table-bordered">
      <tr>
        <th style = "width:10%;">Funding Year</th>
        <th style = "width:60%;">Title</th>
        <th style = "width:30%;">Principle Investigator(s)</th>
        <th style = "width:20%;">Topic(s)</th>
        <th style = "width:10%;">Status</th>
        <th style = "width:10%;">Contains</th>
      </tr>
      <tr *ngFor= "let project of filteredCscProjectsList">
        <td *ngIf="project['fiscal_year']">
          {{ project.fiscal_year}}
        </td>
        <td *ngIf="!project.fiscal_year">
          Unknown
        </td>
        <td>
          <a [routerLink]="['/project/', sbId, project.id]">
            {{ project['title']}}
          </a>
          <ul *ngIf="project.children?.length > 0">
            <li *ngFor= "let childProject of project.children">{{ childProject.title }}</li>
          </ul>
        </td>
        <td>
          <ul *ngFor="let pi of project.contacts.principal_investigators">
            <li>{{ pi.name }} <em *ngIf="pi.organization">({{ pi.organization }})</em></li>
          </ul>
        </td>
        <td *ngIf="project?.topics">
          {{ project.topics }}
        </td>
        <td *ngIf="!project.topics">
          Unknown
        </td>
        <td *ngIf="project.status">
          {{ project.status }}
        </td>
        <td *ngIf="!project.status">
          Unknown
        </td>
        <td style="text-align:center;">
          <ul>
            <li *ngIf="project.hasFolders"><img src = "src\assets\images\Folder_Icon.png" alt = "Folder"></li>
            <li *ngIf="project.hasMaps"><img src = "src\assets\images\GIS_Icon.png" alt = "Map"></li>
          </ul>
        </td>
      </tr>
    </table>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 loading" *ngIf="dataLoading">
      <h4 class="loading">Loading {{ title }} ScienceBase Projects.</h4>
        <img src="{{ approot }}assets/loading.gif" class="loading" alt="Loading Results" title="Loading Results" />
    </div>
    <h4 class="no_data" *ngIf="filteredCscProjectsList.length == 0 && dataLoading == false">Use one or more filters above to select the topics, fiscal years, or statises for the projects you wish to view.<br /><br /><button class="btn btn-primary" (click)="showAllProjects()">See All Projects</button></h4>
  </div>
